---
title: 有关组件props传递的问题
pubDate: 2023/2/1 10:23:42
---

在写vue组件的时候，总是想着props改变时怎么办，现在在这里解析一下，一般传递的值分为几种，一个是值类型，一个是引用类型，在Vue3这两种还分别分为了响应式类型和普通类型。

下面分析以下这几种情况通过props传递时的一些特点

## 值类型 + 普通类型

这是最普通的传递方式

## 值类型 + 响应式类型

也是比较普通的传递方式，需要对props进行watch才能监听到其值的变化，因为获取值会先将其取值，其值时值类型，并不存在响应式

## 引用类型 + 普通类型

普通类型都不会触发watch，但使用其内部的值时发现其值是已经变化了的。

## 引用类型 + 响应式类型

一般用ref,reactive,shadowRef,shallowReactive

ref,reactive会做深层转换，将递归内部的值，如果是引用类型也会变成响应式类型，因此其内部的值也存在响应式，因此即使watch内部的值也是可以触发相应的
shadowRef,shallowReactive只做浅层转换，内部的引用类型仍旧是之前的类型，之前是普通类型就是普通类型，之前是响应式类型就是响应式类型，普通类型不会触发响应。

## 总结

因此必须注意props中的是否是需要做动态变化的，如果需要，可以将值变成引用类型+深层转换+响应式类型，这样有响应式了。如果不需要动态变化，则普通类型就好了
